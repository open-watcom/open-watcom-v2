<html>
<head>
  <title>DOS/32 Advanced DOS Extender - Documentation: Programmer's Reference []</title>
  <link rel="stylesheet" href="../../sheet.css">
</head>
<body bgcolor="#ffffff" link="#0000f0" alink="#f00000" vlink="#700070">

<table cellpadding="0" cellspacing="0" border="0" width="660"><tr><td>



<p>&nbsp;</p>

<p><center><b><i><font color="#990000" size=+2>DOS/32 Advanced DOS Extender
- Programmer's Reference</font></i></b></center></p>

<p><center><hr width="90%" size="1"></center></p>

<p><b><font face="Verdana, Arial, Helvetica">2.07 - DPMI function 0008h
- Set Segment Limit</font></b></p>

<p><font size=-1 face="Verdana, Arial, Helvetica">Sets the limit field in
the descriptor table for the specified segment.</font></p>

<p>&nbsp;</p>

<p><center><table width="90%" border="1" cellspacing="0" cellpadding="4">
<tr>
<td width="10%" valign="TOP" bgcolor="#eeeeee"><b><font size=-1 face="Verdana, Arial, Helvetica">In:</font></b></td>
<td width="90%" valign="TOP" bgcolor="#eeeeee"><b><font size=-1 face="Verdana, Arial, Helvetica">AX</font></b><font size=-1
 face="Verdana, Arial, Helvetica"> = 0008h<br>
<b>BX</b> = selector<br>
<b>CX:DX</b> = 32-bit segment limit</font></td></tr>
<tr>
<td width="10%" valign="TOP" bgcolor="#dedede"><b><font size=-1 face="Verdana, Arial, Helvetica">Out:</font></b></td>
<td width="90%" valign="TOP" bgcolor="#dedede"><p><font size=-1 face="Verdana, Arial, Helvetica">if successful:<br>
<b>CF</b> clear</font></p>

<p><font size=-1 face="Verdana, Arial, Helvetica">if failed:<br>
<b>CF</b> set<br>
<b>AX</b> = error code</font></p>

<blockquote>
  <p><b><font size=-1 face="Verdana, Arial, Helvetica">8021h</font></b><font
   size=-1 face="Verdana, Arial, Helvetica"> - invalid value (the limit is
  greater than 1 MB but the low 12 bits are not set)<br>
  <b>8022h</b> - invalid selector<br>
  <b>8025h</b> - invalid linear address (changing the limit would cause the
  descriptor to reference a linear address range outside that allowed for
  DPMI clients.)</font></blockquote>
</td></tr>
</table>
</center></p>

<p><b><font size=-1 face="Verdana, Arial, Helvetica">Notes:</font></b></p>

<blockquote>
  <p><font size=-1 face="Verdana, Arial, Helvetica">a) The value supplied
  to the function in CX:DX is the byte length of the segment-1 (ie, the value
  returned by the LSL instruction).</font></p>
  <p><font size=-1 face="Verdana, Arial, Helvetica">b) Segment limits greater
  than or equal to 1 MB must be page-aligned. That is, limits greater than
  1 MB must have the low 12 bits set.</font></p>
  <p><font size=-1 face="Verdana, Arial, Helvetica">c) This function has
  an implicit effect on the &quot;G&quot; (granularity) bit in an 80386+
  descriptor's extended access rights/type byte; ie, it is the host's responsibility
  to set the &quot;G&quot; bit correctly.</font></p>
  <p><font size=-1 face="Verdana, Arial, Helvetica">d) Client programs must
  use the LSL instruction to query the limit for a descriptor. Note that
  on 80386 machines, the client must use the 32-bit form of LSL if the segment
  size is greater than 64 KB.</font></p>
  <p><font size=-1 face="Verdana, Arial, Helvetica">e) DOS/32 Advanced DPMI
  and DPMI 1.0 hosts will reload any segment registers which contain the
  selector specified in register BX.</font></p>
</blockquote>

<p>&nbsp;</p>
<p><center><hr width="90%" size="1"></center></p>
<p><center><font size=-2 face="Verdana, Arial, Helvetica">Copyright &copy; DOS/32 Advanced Team 1996-2002<br>All Rights Reserved</font></center>
</td></tr></table>
</body>
</html>
