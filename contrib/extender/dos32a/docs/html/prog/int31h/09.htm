<html>
<head>
  <title>DOS/32 Advanced DOS Extender - Documentation: Programmer's Reference []</title>
  <link rel="stylesheet" href="../../sheet.css">
</head>
<body bgcolor="#ffffff" link="#0000f0" alink="#f00000" vlink="#700070">

<table cellpadding="0" cellspacing="0" border="0" width="660"><tr><td>



<p>&nbsp;</p>

<p><center><b><i><font color="#990000" size=+2>DOS/32 Advanced DOS Extender
- Programmer's Reference</font></i></b></center></p>

<p><center><hr width="90%" size="1"></center></p>

<p><b><font face="Verdana, Arial, Helvetica">2.62 - API function 09h - Get
Access to Performance Counters </font></b></p>

<p>&nbsp;</p>

<p><center><table width="90%" border="1" cellspacing="0" cellpadding="4">
<tr>
<td width="10%" valign="TOP" bgcolor="#eeeeee"><b><font size=-1 face="Verdana, Arial, Helvetica">In:</font></b></td>
<td width="90%" valign="TOP" bgcolor="#eeeeee"><b><font size=-1 face="Verdana, Arial, Helvetica">AL</font></b><font size=-1
 face="Verdana, Arial, Helvetica"> = 09h</font></td></tr>
<tr>
<td width="10%" valign="TOP" bgcolor="#dedede"><b><font size=-1 face="Verdana, Arial, Helvetica">Out:</font></b></td>
<td width="90%" valign="TOP" bgcolor="#dedede"><b><font size=-1 face="Verdana, Arial, Helvetica">CX:EDX</font></b><font
 size=-1 face="Verdana, Arial, Helvetica"> = selector:offset pointer
to the base address of Performance Counters</font></td></tr>
</table>
</center></p>

<p><b><font size=-1 face="Verdana, Arial, Helvetica">Notes: </font></b></p>

<blockquote>
  <p><font size=-1 face="Verdana, Arial, Helvetica">a) Selector returned
  by this function should NOT be modified or freed by the user.</font></p>
  <p><font size=-1 face="Verdana, Arial, Helvetica">b) Performance Counters
  are 32-bit wide counters (located inside DOS/32A DPMI Kernel) that count the
  number of mode switches performed by the DOS Extender. These counters can be
  read from or written to at any time by the application. </font></p>
  <p><font size=-1 face="Verdana, Arial, Helvetica">c) The structure of the
  Performance Counters is the following (relative to EDX as a base address):
  </font></p>

  <blockquote>
    <p><font size=-1 face="Verdana, Arial, Helvetica">
    00h - INT RM -> PM (up)<br>
    04h - INT PM -> RM (down)<br>
    08h - IRQ RM -> PM (up)<br>
    0Ch - IRQ PM -> RM (down)<br>
    10h - IRQ Callback RM -> PM (up)<br>
    14h - IRQ Callback PM -> RM (down)<br>
    18h - Callback RM -> PM (up)<br>
    1Ch - Callback PM -> RM (down)<br>
    <br>
    Where &quot;INT&quot; is a Software Interrupt, &quot;IRQ&quot; is a Hardware Interrupt, &quot;IRQ
    Callback&quot; is a Hardware Interrupt Callback (valid for IRQ 0-15) and &quot;PM&quot; and
    &quot;RM&quot; stand for Protected and Real Modes respective.
    </font></p>
  </blockquote>
  <p><font size=-1 face="Verdana, Arial, Helvetica">d) Note that the counters
  will increment each time a (respective) mode switch occurs, and cannot be
  setup to count specific Interrupts/IRQs/Callbacks (ie INT 21h, etc).</font></p>

</blockquote>

<p>&nbsp;</p>
<p><center><hr width="90%" size="1"></center></p>
<p><center><font size=-2 face="Verdana, Arial, Helvetica">Copyright &copy; DOS/32 Advanced Team 1996-2002<br>All Rights Reserved</font></center>
</td></tr></table>
</body>
</html>
