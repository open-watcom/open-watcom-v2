<html>
<head>
  <title>DOS/32 Advanced DOS Extender - Documentation: Programmer's Reference []</title>
  <link rel="stylesheet" href="../../sheet.css">
</head>
<body bgcolor="#ffffff" link="#0000f0" alink="#f00000" vlink="#700070">

<table cellpadding="0" cellspacing="0" border="0" width="660"><tr><td>



<p>&nbsp;</p>

<p><center><b><i><font color="#990000" size=+2>DOS/32 Advanced DOS Extender
- Programmer's Reference</font></i></b></center></p>

<p><center><hr width="90%" size="1"></center></p>

<p><font size=-1 face="Verdana, Arial, Helvetica"><br>
</font><b><font face="Verdana, Arial, Helvetica">2.14 - DPMI function 0100h
- Allocate DOS Memory Block</font></b></p>

<p><font size=-1 face="Verdana, Arial, Helvetica">Allocates a block of memory
from the DOS memory pool, ie memory below the 1 MB boundary that is controlled
by DOS. Such memory blocks are typically used to exchange data with real
mode programs, TSRs, or device drivers. The function returns both the real
mode segment base address of the block and one or more descriptors that
can be used by protected mode applications to access the block.</font></p>

<p>&nbsp;</p>

<p><center><table width="90%" border="1" cellspacing="0" cellpadding="4">
<tr>
<td width="10%" valign="TOP" bgcolor="#eeeeee"><b><font size=-1 face="Verdana, Arial, Helvetica">In:</font></b></td>
<td width="90%" valign="TOP" bgcolor="#eeeeee"><b><font size=-1 face="Verdana, Arial, Helvetica">AX</font></b><font size=-1
 face="Verdana, Arial, Helvetica"> = 0100h<br>
<b>BX</b> = number of (16-byte) paragraphs desired</font></td></tr>
<tr>
<td width="10%" valign="TOP" bgcolor="#dedede"><b><font size=-1 face="Verdana, Arial, Helvetica">Out:</font></b></td>
<td width="90%" valign="TOP" bgcolor="#dedede"><p><font size=-1 face="Verdana, Arial, Helvetica">if successful:<br>
<b>CF</b> clear<br>
<b>AX</b> = real mode segment base address of allocated block<br>
<b>DX</b> = selector for allocated block</font></p>

<p><font size=-1 face="Verdana, Arial, Helvetica">if failed<br>
<b>CF</b> set<br>
<b>AX</b> = error code<br>
<b>BX</b> = size of largest available block in paragraphs</font></p>

<blockquote>
  <p><b><font size=-1 face="Verdana, Arial, Helvetica">0007h</font></b><font
   size=-1 face="Verdana, Arial, Helvetica"> - memory control blocks damaged<br>
  <b>0008h</b> - insufficient memory<br>
  <b>8011h</b> - descriptor unavailable</font></blockquote>
</td></tr>
</table>
</center></p>

<p><b><font size=-1 face="Verdana, Arial, Helvetica">Notes: </font></b></p>

<blockquote>
  <p><font size=-1 face="Verdana, Arial, Helvetica">a) The selector returned
  by this function will be a writeable data selector with the base set to
  the linear address of the allocated memory block and limit set to the size
  of the memory block.</font></p>
  <p><font size=-1 face="Verdana, Arial, Helvetica">b) Client programs should
  never modify or free any descriptors allocated by this function. The Free
  DOS Memory Block DPMI function 0101h will deallocate the descriptors automatically.</font></p>
  <p><font size=-1 face="Verdana, Arial, Helvetica">c) The DOS allocation
  function (INT 21h function 48h) is used. </font></p>
</blockquote>

<p>&nbsp;</p>
<p><center><hr width="90%" size="1"></center></p>
<p><center><font size=-2 face="Verdana, Arial, Helvetica">Copyright &copy; DOS/32 Advanced Team 1996-2002<br>All Rights Reserved</font></center>
</td></tr></table>
</body>
</html>
