.extensions:
.extensions: .exe .obj .c .h
.extensions: .mif

.c: $(orl_dir)\test\c;$(trmem_dir)
.h: $(orl_dir)\test\h;$(trmem_dir)
.mif: $(mif_path)

!include cproj.mif
!include deftarg.mif
!include defrule.mif

obj             = .obj
exe             = .exe

inc_dirs = $(orl_dir)\h;$(orl_dir)\elf\h;$(orl_dir)\coff\h;$(watcom_dir)\h;$(trmem_dir)

!ifndef on_build_machine
extra_c_flags_test      = -of+
extra_c_flags_trmemcvr  = -dTRMEM -of+
extra_c_flags_trmem     = -dTRMEM -of+
!endif

extra_l_flags           = library $(orl_dir)\o\orl.lib

.before:
        set include=$(inc_path)

test_objs       =   test$(obj) &
                    getopt$(obj) &
                    trmemcvr$(obj)
!ifndef on_build_machine
test_objs       +=  trmem$(obj)
!endif

objread$(exe) : $(test_objs) $(orl_dir)\o\orl.lib
        $(linker) $(lflags) name $@ file { $(test_objs) }
